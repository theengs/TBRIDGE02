(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{429:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant.1bf06f13.png"},430:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant-2.b82edac6.png"},431:function(e,t,a){e.exports=a.p+"assets/img/Theengs-Plug-Settings-HomeAssistant-3.292ea1aa.png"},440:function(e,t,a){"use strict";a.r(t);var r=a(65),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"user-guide"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#user-guide"}},[e._v("#")]),e._v(" User Guide")]),e._v(" "),r("h2",{attrs:{id:"led-indicator-guide"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#led-indicator-guide"}},[e._v("#")]),e._v(" LED Indicator Guide")]),e._v(" "),r("p",[e._v("From v1.8.0 and after")]),e._v(" "),r("ul",[r("li",[e._v("First Led: Power")]),e._v(" "),r("li",[e._v("Second Led: Network")]),e._v(" "),r("li",[e._v("Third Led: Broker connection")]),e._v(" "),r("li",[e._v("Fourth Led: Operations")])]),e._v(" "),r("h3",{attrs:{id:"steady-yellow-third-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#steady-yellow-third-led"}},[e._v("#")]),e._v(" Steady Yellow third Led")]),e._v(" "),r("p",[e._v("The bridge is generating an Access Point for network onboarding.")]),e._v(" "),r("h3",{attrs:{id:"blinking-orange-third-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#blinking-orange-third-led"}},[e._v("#")]),e._v(" Blinking Orange third Led")]),e._v(" "),r("p",[e._v("The bridge is disconnected from the MQTT broker.")]),e._v(" "),r("h3",{attrs:{id:"blinking-orange-second-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#blinking-orange-second-led"}},[e._v("#")]),e._v(" Blinking Orange second Led")]),e._v(" "),r("p",[e._v("The bridge is disconnected from the network.")]),e._v(" "),r("h3",{attrs:{id:"steady-green-third-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#steady-green-third-led"}},[e._v("#")]),e._v(" Steady Green third Led")]),e._v(" "),r("p",[e._v("The bridge is connected to both the network and the MQTT broker.")]),e._v(" "),r("h3",{attrs:{id:"blue-fourth-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#blue-fourth-led"}},[e._v("#")]),e._v(" Blue fourth Led")]),e._v(" "),r("p",[e._v("An update or operation is currently in progress.")]),e._v(" "),r("h3",{attrs:{id:"blinking-purple-fourth-led"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#blinking-purple-fourth-led"}},[e._v("#")]),e._v(" Blinking purple fourth Led")]),e._v(" "),r("p",[e._v("Over the Air update in progress")]),e._v(" "),r("p",[e._v("Before v1.8.0")]),e._v(" "),r("h3",{attrs:{id:"steady-orange"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#steady-orange"}},[e._v("#")]),e._v(" Steady Orange")]),e._v(" "),r("p",[e._v("The bridge is generating an Access Point for network onboarding.")]),e._v(" "),r("h3",{attrs:{id:"orange-5-seconds-on-5-seconds-off"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#orange-5-seconds-on-5-seconds-off"}},[e._v("#")]),e._v(" Orange (5 seconds on, 5 seconds off)")]),e._v(" "),r("p",[e._v("The bridge is disconnected from the MQTT broker.")]),e._v(" "),r("h3",{attrs:{id:"orange-2-seconds-on-2-seconds-off"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#orange-2-seconds-on-2-seconds-off"}},[e._v("#")]),e._v(" Orange (2 seconds on, 2 seconds off)")]),e._v(" "),r("p",[e._v("The bridge is disconnected from the WiFi network.")]),e._v(" "),r("h3",{attrs:{id:"steady-green"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#steady-green"}},[e._v("#")]),e._v(" Steady Green")]),e._v(" "),r("p",[e._v("The bridge is connected to both the network and the MQTT broker.")]),e._v(" "),r("h3",{attrs:{id:"steady-blue"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#steady-blue"}},[e._v("#")]),e._v(" Steady Blue")]),e._v(" "),r("p",[e._v("An update or operation is currently in progress.")]),e._v(" "),r("h3",{attrs:{id:"flashing-blue"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#flashing-blue"}},[e._v("#")]),e._v(" Flashing Blue")]),e._v(" "),r("p",[e._v("Scanning or communication is in progress.")]),e._v(" "),r("h2",{attrs:{id:"modules-and-parameters"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#modules-and-parameters"}},[e._v("#")]),e._v(" Modules and Parameters")]),e._v(" "),r("h3",{attrs:{id:"home-assistant-discovery-convention"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#home-assistant-discovery-convention"}},[e._v("#")]),e._v(" Home Assistant Discovery Convention")]),e._v(" "),r("p",[e._v("The bridge publishes its configuration and detected BLE sensors to the broker following the "),r("a",{attrs:{href:"https://www.home-assistant.io/integrations/mqtt/#mqtt-discovery",target:"_blank",rel:"noopener noreferrer"}},[e._v("Home Assistant discovery convention"),r("OutboundLink")],1),e._v(". You can find the devices in the Configuration->Devices menu with "),r("a",{attrs:{href:"https://docs.openmqttgateway.com/integrate/home_assistant.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Home Assistant"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",{attrs:{align:"left"}},[r("img",{attrs:{src:a(429)}})]),e._v(" "),r("p",{attrs:{align:"left"}},[r("img",{attrs:{src:a(430)}})]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("Other controllers can also use the Home Assistant convention for automatic discovery.")])]),e._v(" "),r("h3",{attrs:{id:"bluetooth-gateway"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#bluetooth-gateway"}},[e._v("#")]),e._v(" Bluetooth Gateway")]),e._v(" "),r("p",[e._v("The bridge detects "),r("a",{attrs:{href:"https://docs.openmqttgateway.com/prerequisites/devices.html#for-ble-devices",target:"_blank",rel:"noopener noreferrer"}},[e._v("Bluetooth devices"),r("OutboundLink")],1),e._v(" and publishes their data to the MQTT broker.")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('home/112233445566/BTtoMQTT/AABBCCDDEEFF\n{"id":"AA:BB:CC:DD:EE:FF","rssi":-88,"brand":"ClearGrass/Qingping","model":"Alarm Clock","model_id":"CGC1/CGD1","tempc":20.3,"tempf":68.54,"hum":55.3,"batt":41}\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("For example with auto-discovery\n")]),r("p",{attrs:{align:"left"}},[r("img",{attrs:{src:a(431)}})]),r("p"),e._v(" "),r("h3",{attrs:{id:"default-parameters"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#default-parameters"}},[e._v("#")]),e._v(" Default parameters")]),e._v(" "),r("ul",[r("li",[e._v("Adaptive scanning activated (from v1.5.0)")]),e._v(" "),r("li",[e._v("Connect to BLE devices deactivated")]),e._v(" "),r("li",[e._v("BLE adaptive scan activated")])]),e._v(" "),r("p",[e._v("The BLE parameters can be changed with the commands detailed into "),r("a",{attrs:{href:"https://docs.openmqttgateway.com/use/ble.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("BLE gateway usage"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h2",{attrs:{id:"erasing-theengs-bridge-configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#erasing-theengs-bridge-configuration"}},[e._v("#")]),e._v(" Erasing Theengs Bridge configuration")]),e._v(" "),r("p",[e._v("If connected to an MQTT broker, the bridge configuration can be erased with an "),r("a",{attrs:{href:"https://docs.openmqttgateway.com/use/gateway.html#erase-the-esp-settings",target:"_blank",rel:"noopener noreferrer"}},[e._v("MQTT command"),r("OutboundLink")],1),e._v(' or the button available in HA "SYS: Erase credentials".\nIf you are not connected to an MQTT broker, you can erase the board configuration by long pressing the grey button (more than 30 seconds). This feature is available only with TBRIDGE02.')]),e._v(" "),r("h2",{attrs:{id:"updating-theengs-bridge"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#updating-theengs-bridge"}},[e._v("#")]),e._v(" Updating Theengs Bridge")]),e._v(" "),r("p",[e._v("Theengs bridge can benefit from updates following these different methods:")]),e._v(" "),r("ul",[r("li",[e._v("From Home Assistant directly, Settings->Devices & Services->Devices, click on the bridge, click on the firmware version, click Update")]),e._v(" "),r("li",[e._v("By connecting to your computer with a USB cable\n"),r("ul",[r("li",[e._v("Go to the upload portal https://docs.openmqttgateway.com/dev/upload/web-install.html")]),e._v(" "),r("li",[e._v('Select "theengs-bridge", and unselect "Erase Flash" to keep your parameters')]),e._v(" "),r("li",[e._v("Click on INSTALL, and wait a few minutes")]),e._v(" "),r("li",[e._v("The bridge will have now the latest version")])])]),e._v(" "),r("li",[e._v("From the WifiManager portal, by uploading a binary directly to the bridge\n"),r("ul",[r("li",[e._v('Download the last version binary named "Theengs-Bridge-firmware" from the Github '),r("a",{attrs:{href:"https://github.com/1technophile/OpenMQTTGateway/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("release page of OpenMQTTGateway"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Connect to the Wifi access point with your smartphone")]),e._v(" "),r("li",[e._v("Click Update")]),e._v(" "),r("li",[e._v("Add the binary downloaded previously")]),e._v(" "),r("li",[e._v('Click Update and wait a few minutes until you get "Update successfull"')]),e._v(" "),r("li",[e._v("Reconfigure the bridge into the Wifi portal")])])]),e._v(" "),r("li",[e._v("From an MQTT command to trigger the download of the firmware from a webserver\n"),r("ul",[r("li",[e._v("Connect to your MQTT broker with a client like MQTT Explorer")]),e._v(" "),r("li",[e._v("Publish the update command like below (OTAPASSWORD being your Over The Air password if you changed it during the configuration):")])])])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('{\n  "version": "latest"\n}\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("p",[e._v("To this topic (112233445566 being your gateway_name):")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("home/112233445566/commands/MQTTtoSYS/firmware_update\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("ul",[r("li",[e._v("The bridge will restart with the new version")])])])}),[],!1,null,null,null);t.default=s.exports}}]);